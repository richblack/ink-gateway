# Obsidian Ink Plugin 使用者指南

## 目錄

1. [安裝與設定](#安裝與設定)
2. [功能概覽](#功能概覽)
3. [AI 聊天助手](#ai-聊天助手)
4. [語義搜尋](#語義搜尋)
5. [模板系統](#模板系統)
6. [自動內容同步](#自動內容同步)
7. [離線模式](#離線模式)
8. [故障排除](#故障排除)
9. [常見問題](#常見問題)

## 安裝與設定

### 系統需求

- Obsidian 版本 1.0.0 或更高
- 穩定的網路連線（用於 Ink-Gateway 整合）
- 至少 100MB 可用儲存空間

### 安裝步驟

#### 方法一：從 Obsidian 社群插件商店安裝

1. 開啟 Obsidian
2. 前往 **設定** → **社群插件**
3. 點擊 **瀏覽** 按鈕
4. 搜尋 "Ink Plugin"
5. 點擊 **安裝** 按鈕
6. 安裝完成後，點擊 **啟用** 按鈕

#### 方法二：手動安裝

1. 從 [GitHub Releases](https://github.com/your-repo/obsidian-ink-plugin/releases) 下載最新版本
2. 解壓縮檔案到 Obsidian 庫的 `.obsidian/plugins/obsidian-ink-plugin/` 目錄
3. 重新啟動 Obsidian
4. 前往 **設定** → **社群插件** 啟用插件

### 初始設定

1. 啟用插件後，前往 **設定** → **Ink Plugin**
2. 設定 Ink-Gateway 連線資訊：
   - **Gateway URL**: 輸入您的 Ink-Gateway 伺服器位址
   - **API Key**: 輸入您的 API 金鑰
3. 點擊 **測試連線** 確認設定正確
4. 根據需要調整其他設定選項

### 基本設定選項

| 設定項目 | 說明 | 預設值 |
|---------|------|--------|
| Gateway URL | Ink-Gateway 伺服器位址 | http://localhost:8080 |
| API Key | 認證用的 API 金鑰 | (空白) |
| 自動同步 | 是否自動同步內容變更 | 啟用 |
| 同步間隔 | 自動同步的時間間隔（毫秒） | 5000 |
| 快取功能 | 是否啟用本地快取 | 啟用 |
| 除錯模式 | 是否顯示詳細的除錯資訊 | 停用 |

## 功能概覽

Obsidian Ink Plugin 提供以下主要功能：

### 🤖 AI 聊天助手
- 與 AI 進行自然語言對話
- 基於您的筆記內容提供智能建議
- 支援多輪對話和上下文理解

### 🔍 語義搜尋
- 超越關鍵字的智能搜尋
- 理解內容語義和概念關聯
- 快速找到相關的筆記片段

### 📋 模板系統
- 建立可重複使用的內容模板
- 支援動態插槽和變數
- 自動化內容結構建立

### 🔄 自動內容同步
- 即時同步筆記變更到雲端
- 支援階層結構和關聯關係
- 離線模式和衝突解決

## AI 聊天助手

### 開啟 AI 聊天

有三種方式可以開啟 AI 聊天視窗：

1. **命令面板**: 按 `Ctrl+P` (Windows/Linux) 或 `Cmd+P` (Mac)，輸入 "Open AI Chat"
2. **側邊欄圖示**: 點擊左側邊欄的 AI 聊天圖示
3. **快捷鍵**: 預設為 `Ctrl+Shift+A` (可在設定中自訂)

### 使用 AI 聊天

#### 基本對話

```
您: 幫我總結今天的會議筆記
AI: 根據您的筆記，今天的會議主要討論了以下幾點：
1. 專案進度更新
2. 預算調整方案
3. 下週的里程碑目標
...
```

#### 智能建議

AI 會根據您的筆記內容提供相關建議：

- **相關筆記**: 推薦與當前話題相關的其他筆記
- **標籤建議**: 建議適合的標籤來組織內容
- **連結建議**: 推薦可以建立的筆記間連結

#### 內容處理

AI 可以幫助您處理和改善筆記內容：

```
您: 幫我改善這段文字的表達
AI: 我可以幫您重新組織這段內容，讓它更清晰易懂...
```

### AI 聊天功能

| 功能 | 說明 | 使用方式 |
|------|------|----------|
| 內容總結 | 總結長篇筆記或文件 | "總結這份文件的重點" |
| 問題解答 | 基於筆記內容回答問題 | "根據我的筆記，什麼是...？" |
| 寫作協助 | 協助改善文字表達 | "幫我改善這段文字" |
| 概念解釋 | 解釋複雜概念或術語 | "解釋一下量子計算的原理" |
| 連結建議 | 建議筆記間的關聯 | "這個概念還與哪些筆記相關？" |

## 語義搜尋

### 開啟搜尋視窗

1. **命令面板**: 輸入 "Open Semantic Search"
2. **快捷鍵**: 預設為 `Ctrl+Shift+F`
3. **側邊欄**: 點擊搜尋圖示

### 搜尋類型

#### 語義搜尋
根據內容的語義和概念進行搜尋，而非僅僅匹配關鍵字。

```
搜尋: "機器學習演算法"
結果: 包含 AI、神經網路、深度學習等相關概念的筆記
```

#### 精確搜尋
完全匹配指定的文字內容。

```
搜尋: "def calculate_average()"
結果: 包含確切函數名稱的程式碼筆記
```

#### 標籤搜尋
根據標籤組合進行搜尋。

```
搜尋標籤: #python AND #tutorial
結果: 同時包含 python 和 tutorial 標籤的筆記
```

### 搜尋技巧

#### 使用搜尋運算子

| 運算子 | 說明 | 範例 |
|--------|------|------|
| AND | 同時包含多個條件 | `機器學習 AND Python` |
| OR | 包含任一條件 | `JavaScript OR TypeScript` |
| NOT | 排除特定條件 | `程式設計 NOT Java` |
| "" | 精確片語搜尋 | `"深度學習模型"` |

#### 進階篩選

- **日期範圍**: 限制搜尋特定時間範圍的筆記
- **檔案類型**: 只搜尋特定類型的檔案
- **標籤篩選**: 根據標籤組合進行篩選
- **相關性排序**: 按相關性分數排序結果

### 搜尋結果操作

#### 預覽和導航
- **快速預覽**: 滑鼠懸停查看內容摘要
- **直接跳轉**: 點擊結果直接跳轉到原始位置
- **上下文顯示**: 顯示搜尋結果的前後文內容

#### 結果管理
- **儲存搜尋**: 將常用搜尋儲存為書籤
- **匯出結果**: 將搜尋結果匯出為筆記
- **批次操作**: 對多個結果執行批次操作

## 模板系統

### 建立模板

#### 基本模板語法

使用雙大括號 `{{}}` 定義插槽：

```markdown
# 會議記錄模板

**日期**: {{date}}
**參與者**: {{participants}}
**主題**: {{topic}}

## 議程
{{agenda}}

## 決議事項
{{decisions}}

## 行動項目
- [ ] {{action_item_1}}
- [ ] {{action_item_2}}

#會議記錄 #{{project_tag}}
```

#### 插槽類型

| 類型 | 說明 | 範例 |
|------|------|------|
| text | 純文字內容 | `{{title}}` |
| date | 日期格式 | `{{meeting_date}}` |
| number | 數字 | `{{participant_count}}` |
| link | 內部連結 | `{{related_note}}` |
| tag | 標籤 | `{{category_tag}}` |

#### 預設值和驗證

```markdown
{{title:預設標題}}           <!-- 設定預設值 -->
{{email:required}}          <!-- 必填欄位 -->
{{count:number:min=1}}      <!-- 數字驗證 -->
{{date:date:format=YYYY-MM-DD}} <!-- 日期格式 -->
```

### 使用模板

#### 套用模板

1. 建立新筆記或開啟現有筆記
2. 使用命令 "Apply Template"
3. 選擇要套用的模板
4. 填入插槽值
5. 確認套用

#### 模板實例管理

- **查看實例**: 查看基於特定模板建立的所有筆記
- **更新實例**: 當模板更新時，選擇性更新現有實例
- **實例統計**: 查看模板使用統計和分析

### 模板最佳實踐

#### 設計原則

1. **保持簡潔**: 避免過於複雜的模板結構
2. **語義清晰**: 使用有意義的插槽名稱
3. **靈活性**: 提供適當的預設值和可選欄位
4. **一致性**: 在相似用途的模板間保持一致的結構

#### 常用模板範例

**專案筆記模板**:
```markdown
# {{project_name}}

## 專案概述
{{project_description}}

## 目標
{{objectives}}

## 時程規劃
- 開始日期: {{start_date}}
- 預計完成: {{end_date}}

## 團隊成員
{{team_members}}

## 相關資源
{{resources}}

#專案 #{{status_tag}}
```

**學習筆記模板**:
```markdown
# {{topic}} 學習筆記

## 學習目標
{{learning_objectives}}

## 重點摘要
{{key_points}}

## 範例
{{examples}}

## 延伸閱讀
{{further_reading}}

## 反思
{{reflection}}

#學習 #{{subject_tag}}
```

## 自動內容同步

### 同步機制

#### 自動同步觸發條件

1. **內容變更**: 當您編輯筆記內容時
2. **檔案操作**: 建立、刪除、重新命名檔案時
3. **定時同步**: 根據設定的時間間隔
4. **手動觸發**: 使用同步命令

#### 同步狀態指示

狀態列會顯示目前的同步狀態：

| 圖示 | 狀態 | 說明 |
|------|------|------|
| 🟢 | 已同步 | 所有變更已成功同步 |
| 🟡 | 同步中 | 正在進行同步作業 |
| 🔴 | 同步失敗 | 同步過程中發生錯誤 |
| ⚫ | 離線模式 | 目前處於離線狀態 |

### 階層結構處理

#### 標題階層

插件會自動識別 Markdown 標題階層：

```markdown
# 主標題          (層級 1)
## 次標題         (層級 2)
### 子標題        (層級 3)
#### 細項標題     (層級 4)
```

#### 列表階層

支援巢狀列表結構：

```markdown
- 主項目
  - 子項目 1
    - 細項 1.1
    - 細項 1.2
  - 子項目 2
- 另一個主項目
```

### 衝突解決

#### 衝突類型

1. **內容衝突**: 同一段落在不同裝置上被修改
2. **結構衝突**: 檔案結構發生變更
3. **標籤衝突**: 標籤在不同地方被修改

#### 解決策略

- **自動合併**: 對於不衝突的變更自動合併
- **使用者選擇**: 對於衝突內容提供選擇介面
- **版本保留**: 保留衝突版本供後續處理

## 離線模式

### 離線功能

#### 自動偵測

插件會自動偵測網路狀態：
- 網路中斷時自動切換到離線模式
- 網路恢復時自動開始同步

#### 離線操作

在離線模式下，您仍可以：
- 正常編輯和建立筆記
- 使用本地搜尋功能
- 套用已快取的模板
- 查看 AI 聊天歷史

#### 變更佇列

離線時的所有變更會被記錄在本地佇列中：
- 內容修改
- 檔案建立/刪除
- 標籤變更
- 模板套用

### 同步恢復

#### 自動同步

網路恢復後，插件會：
1. 自動偵測網路連線
2. 驗證伺服器連線
3. 按順序處理佇列中的變更
4. 解決可能的衝突
5. 更新本地快取

#### 手動同步

您也可以手動觸發同步：
- 使用命令 "Force Sync"
- 點擊狀態列的同步圖示
- 使用快捷鍵 `Ctrl+Shift+S`

## 故障排除

### 常見問題診斷

#### 連線問題

**症狀**: 無法連接到 Ink-Gateway
**可能原因**:
- 網路連線問題
- Gateway URL 設定錯誤
- API Key 無效
- 防火牆阻擋

**解決步驟**:
1. 檢查網路連線
2. 驗證 Gateway URL 格式
3. 確認 API Key 正確性
4. 檢查防火牆設定

#### 同步問題

**症狀**: 內容無法同步或同步緩慢
**可能原因**:
- 網路不穩定
- 伺服器負載過高
- 本地快取問題
- 檔案權限問題

**解決步驟**:
1. 重新啟動插件
2. 清除本地快取
3. 檢查檔案權限
4. 聯繫系統管理員

#### 效能問題

**症狀**: Obsidian 運行緩慢或卡頓
**可能原因**:
- 快取檔案過大
- 記憶體使用過多
- 同步頻率過高
- 大量檔案處理

**解決步驟**:
1. 調整同步間隔
2. 清理快取檔案
3. 重新啟動 Obsidian
4. 檢查系統資源使用

### 除錯工具

#### 除錯模式

啟用除錯模式以獲得詳細資訊：
1. 前往插件設定
2. 啟用 "除錯模式"
3. 重現問題
4. 查看開發者控制台

#### 日誌檢查

查看詳細日誌：
- 開啟開發者工具 (`Ctrl+Shift+I`)
- 切換到 Console 標籤
- 查找 "InkPlugin" 相關訊息

#### 診斷報告

生成診斷報告：
1. 使用命令 "Generate Diagnostic Report"
2. 報告會包含：
   - 插件版本資訊
   - 設定狀態
   - 錯誤日誌
   - 效能統計

### 重置和修復

#### 軟重置

保留設定，重置快取：
1. 使用命令 "Reset Cache"
2. 重新啟動插件

#### 硬重置

完全重置插件：
1. 停用插件
2. 刪除插件資料夾
3. 重新安裝插件
4. 重新設定

## 常見問題

### 安裝和設定

**Q: 插件安裝後無法啟用？**
A: 請確認 Obsidian 版本符合需求，並檢查是否有其他插件衝突。

**Q: 如何更新 API Key？**
A: 前往設定頁面，更新 API Key 後點擊 "測試連線" 驗證。

**Q: 可以同時連接多個 Gateway 嗎？**
A: 目前版本僅支援單一 Gateway 連線。

### 功能使用

**Q: AI 聊天沒有回應？**
A: 檢查網路連線和 API Key 設定，確認 Gateway 服務正常運行。

**Q: 搜尋結果不準確？**
A: 嘗試使用不同的搜尋關鍵字，或等待內容索引完成。

**Q: 模板無法套用？**
A: 檢查模板語法是否正確，確認插槽名稱沒有特殊字元。

### 效能和穩定性

**Q: 插件佔用太多記憶體？**
A: 調整快取大小限制，或定期清理快取檔案。

**Q: 同步速度很慢？**
A: 增加同步間隔時間，或檢查網路頻寬。

**Q: 插件導致 Obsidian 當機？**
A: 停用其他插件測試，或聯繫技術支援。

### 資料安全

**Q: 我的資料會被儲存在哪裡？**
A: 資料會同步到您設定的 Ink-Gateway 伺服器，本地也會保留快取。

**Q: 如何備份插件資料？**
A: 使用 "Export Settings" 功能匯出設定，定期備份 Obsidian 庫。

**Q: 可以加密同步的資料嗎？**
A: 插件使用 HTTPS 傳輸，具體加密政策請參考 Gateway 文件。

## 技術支援

### 聯繫方式

- **GitHub Issues**: [提交問題報告](https://github.com/your-repo/obsidian-ink-plugin/issues)
- **社群論壇**: [Obsidian 社群討論](https://forum.obsidian.md)
- **電子郵件**: support@ink-gateway.com

### 提交問題時請包含

1. 插件版本號
2. Obsidian 版本
3. 作業系統資訊
4. 問題的詳細描述
5. 重現步驟
6. 錯誤訊息或截圖
7. 診斷報告（如適用）

### 更新和發布

- **自動更新**: 插件會自動檢查更新
- **發布說明**: 查看 [GitHub Releases](https://github.com/your-repo/obsidian-ink-plugin/releases)
- **測試版本**: 加入 Beta 測試計畫獲得早期版本

---

**版本**: 1.0.0  
**最後更新**: 2024年1月  
**文件語言**: 繁體中文